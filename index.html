<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Habit Tracker</title>

    <style>
      :root {
     --primary: #4f46e5;
     --success: #10b981;
     --bg: #f8fafc;
     --text: #1e293b;
    }

    body {
    font-family: 'Segoe UI', sans-serif;
    background-color: #f0f2f5;
    display: flex;
    justify-content: center;
    padding-top: 50px;
    margin: 0;
    }

    .container {
    background: white;
    width: 90%;
    max-width: 450px;
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }

    h1 {
    text-align: center;
    color: #1a73e8;
    font-size: 22px;
    margin-bottom: 25px;
    }

    /* Ti·∫øn ƒë·ªô */
    .progress-container {
    background: #e8eaed;
    height: 12px;
    border-radius: 10px;
    overflow: hidden;
    }

    .progress-bar {
    background: linear-gradient(90deg, #34a853, #b7e1cd);
    width: 0%;
    height: 100%;
    transition: 0.5s ease;
    }

    #progressText {
    text-align: center;
    font-size: 13px;
    color: #5f6368;
    margin: 10px 0 25px;
    }

   /* Nh·∫≠p li·ªáu */
    .input-group {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    }

    input {
    flex: 1;
    padding: 12px;
    border: 1px solid #dadce0;
    border-radius: 8px;
    outline: none;
    }

    button#addBtn {
    background: #1a73e8; /* M√†u xanh ch·ªß ƒë·∫°o */
    color: white;
    border: none;
    padding: 12px 30px; /* TƒÉng kho·∫£ng c√°ch ƒë·ªám (Tr√™n-D∆∞·ªõi: 12px, Tr√°i-Ph·∫£i: 30px) */
    border-radius: 12px; /* Bo g√≥c m·ªÅm m·∫°i h∆°n */
    font-size: 16px;    /* TƒÉng k√≠ch th∆∞·ªõc ch·ªØ */
    font-weight: 700;   /* L√†m ch·ªØ ƒë·∫≠m h∆°n */
    cursor: pointer;
    transition: all 0.2s ease; /* Hi·ªáu ·ª©ng m∆∞·ª£t m√† khi nh·∫•n */
    box-shadow: 0 4px 6px rgba(26, 115, 232, 0.2); /* Th√™m b√≥ng ƒë·ªï cho n√∫t n·ªïi l√™n */
    }

/* Th√™m hi·ªáu ·ª©ng khi di chu·ªôt v√†o (Hover) */
    button#addBtn:hover {
    background: #1557b0; /* M√†u ƒë·∫≠m h∆°n m·ªôt ch√∫t */
    transform: scale(1.05); /* N√∫t to l√™n 5% khi r√™ chu·ªôt v√†o */
    box-shadow: 0 6px 12px rgba(26, 115, 232, 0.3);
    }

    /* Hi·ªáu ·ª©ng khi nh·∫•n v√†o (Active) */
    button#addBtn:active {
    transform: scale(0.98); /* N√∫t h∆°i l√∫n xu·ªëng khi nh·∫•n */
    }

   /* Danh s√°ch */
    #habitList {
    padding: 0;
    list-style: none;
    }

    li {
    background: #fff;
    border: 1px solid #f1f3f4;
    padding: 15px;
    border-radius: 12px;
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.02);
    cursor: pointer;
    transition: 0.2s;
    }

    li:hover { transform: translateY(-2px); }

    .streak {
    color: #ea4335;
    font-weight: bold;
    font-size: 14px;
    }

    .delete-btn {
    background: #fce8e6;
    color: #d93025;
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
    }

    .reset-btn {
    width: 100%;
    background: none;
    border: none;
    color: #9aa0a6;
    font-size: 12px;
    margin-top: 20px;
    cursor: pointer;
    text-decoration: underline;
    }

/* Hi·ªáu ·ª©ng nh√°y khi xong */
@keyframes pulse {
    0% { background-color: #fff; }
    50% { background-color: #e6f4ea; }
    100% { background-color: #fff; }
}
.completed-anim { animation: pulse 0.6s ease; }
    </style>
</head>
<body>
    <div class="container">
        <h1>TH√ìI QUEN M·ªñI NG√ÄY</h1>

        <div class="progress-section">
            <div class="progress-container">
                <div id="progressBar" class="progress-bar"></div>
            </div>
            <p id="progressText">H√¥m nay b·∫°n ƒë√£ ho√†n th√†nh 0%</p>
        </div>

        <div class="input-group">
            <input type="text" id="habitInput" placeholder="Nh·∫≠p th√≥i quen m·ªõi...">
            <button id="addBtn">Th√™m m·ªôt th√≥i quen</button>
        </div>

        <ul id="habitList"></ul>

        <button id="resetBtn" class="reset-btn">X√≥a to√†n b·ªô d·ªØ li·ªáu</button>
    </div>

    <audio id="successSound" src="https://assets.mixkit.co/active_storage/sfx/2354/2354-preview.mp3"></audio>
    <audio id="addSound" src="https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3"></audio>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <script >
       const habitInput = document.getElementById('habitInput');
const addBtn = document.getElementById('addBtn');
const habitList = document.getElementById('habitList'); // L·∫•y danh s√°ch

addBtn.addEventListener('click', function() {
    const text = habitInput.value;

    if (text !== "") { // Ch·ªâ th√™m n·∫øu √¥ nh·∫≠p kh√¥ng tr·ªëng
        // 1. T·∫°o m·ªôt th·∫ª li m·ªõi
        const newHabit = document.createElement('li');
        
        // 2. Thi·∫øt l·∫≠p n·ªôi dung cho th·∫ª li (gi·ªëng c·∫•u tr√∫c c√°c th·∫ª c≈©)
        newHabit.innerHTML = `
          <span class="habit-name">${text}</span>
          <span class="streak">üî• <span class="streak-count">0</span> ng√†y</span>
          <button class="delete-btn">X√≥a</button>
        `;

        // 3. G·∫Øn th·∫ª li n√†y v√†o danh s√°ch ul
        habitList.appendChild(newHabit);

        // 4. X√≥a ch·ªØ trong √¥ nh·∫≠p sau khi th√™m xong
        habitInput.value = "";
        document.getElementById('addSound').play();
        saveData();
        updateProgress();
    }
});
  //  Trung t√¢m ƒëi·ªÅu khi·ªÉn: X√≥a, TƒÉng streak v√† L∆∞u d·ªØ li·ªáu
habitList.addEventListener('click', function(event) {
    //  X·ª¨ L√ù N√öT X√ìA
    if (event.target.classList.contains('delete-btn')) {
        const li = event.target.closest('li');
        li.remove(); 
        saveData(); 
        updateProgress(false);
        return; 
    }

    //  X·ª¨ L√ù TƒÇNG STREAK (Khi nh·∫•n v√†o th√≥i quen)
    const li = event.target.closest('li');
    if (li) {
        const today = new Date().toLocaleDateString();
        const lastDate = li.getAttribute('data-last-completed');

        //  Ki·ªÉm tra n·∫øu h√¥m nay ƒë√£ nh·∫•n r·ªìi
        if (lastDate === today) {
            alert("B·∫°n ƒë√£ ho√†n th√†nh th√≥i quen n√†y h√¥m nay r·ªìi! ‚ú®");
            return;
        }

        //  N·∫øu ch∆∞a nh·∫•n: TƒÉng con s·ªë streak
        const countSpan = li.querySelector('.streak-count');
        let currentCount = parseInt(countSpan.innerText);
        countSpan.innerText = currentCount + 1;
        // --- CH√àN ƒêO·∫†N HI·ªÜU ·ª®NG V√Ä √ÇM THANH V√ÄO ƒê√ÇY ---
document.getElementById('successSound').play(); // Ph√°t ti·∫øng "Ting"
li.classList.add('completed-animation'); // Th√™m hi·ªáu ·ª©ng ph√°t s√°ng
setTimeout(() => li.classList.remove('completed-animation'), 600); // X√≥a hi·ªáu ·ª©ng sau 0.6 gi√¢y

        //  Ghi ch√∫ l·∫°i ng√†y ho√†n th√†nh v√†o th·∫ª li
        li.setAttribute('data-last-completed', today);

        //  L∆∞u tr·∫°ng th√°i m·ªõi v√†o b·ªô nh·ªõ
        saveData();
        updateProgress(true);
    }
}); // K·∫øt th√∫c kh·ªëi ƒëi·ªÅu khi·ªÉn danh s√°ch
     
// --- ƒê·ªäNH NGHƒ®A H√ÄM  ---

function saveData() {
    const habits = [];
    const liItems = document.querySelectorAll('#habitList li');
    liItems.forEach(li => {
        habits.push({
            name: li.querySelector('.habit-name').innerText,
            count: li.querySelector('.streak-count').innerText,
            lastDate: li.getAttribute('data-last-completed')
        });
    });
    localStorage.setItem('habits', JSON.stringify(habits));
}

function updateProgress(coChoPhaoNo) { // Bi·∫øn n√†y ƒë·ªÉ ƒëi·ªÅu khi·ªÉn ph√°o
    const liItems = document.querySelectorAll('#habitList li');
    const total = liItems.length;
    const progressBar = document.getElementById('progressBar');
    const progressText = document.getElementById('progressText');

    if (total === 0) {
        progressBar.style.width = "0%";
        progressText.innerText = "H√£y th√™m th√≥i quen ƒë·ªÉ b·∫Øt ƒë·∫ßu!";
        return;
    }

    const today = new Date().toLocaleDateString();
    let completedToday = 0;

    liItems.forEach(li => {
        if (li.getAttribute('data-last-completed') === today) {
            completedToday++;
        }
    });

    const percent = Math.round((completedToday / total) * 100);
    progressBar.style.width = percent + "%";
    progressText.innerText = `H√¥m nay b·∫°n ƒë√£ ho√†n th√†nh ${percent}%`;

    // KH√ìA AN TO√ÄN: Ch·ªâ khi coChoPhaoNo l√† TRUE th√¨ ph√°o m·ªõi ƒë∆∞·ª£c ph√©p n·ªï
    if (coChoPhaoNo === true && percent === 100) {
        confetti({
            particleCount: 150,
            spread: 70,
            origin: { y: 0.6 }
        });
    }
}

// L·ªánh k√≠ch ho·∫°t n·∫°p d·ªØ li·ªáu khi v·ª´a m·ªü trang
loadData();
function loadData() {
    const savedHabits = localStorage.getItem('habits');
    if (savedHabits) {
        const habits = JSON.parse(savedHabits);
        
        //  X√≥a s·∫°ch danh s√°ch c≈© tr√™n m√†n h√¨nh tr∆∞·ªõc khi n·∫°p l·∫°i
        habitList.innerHTML = ""; 

        habits.forEach(habit => {
            const newHabit = document.createElement('li');
            if (habit.lastDate) {
                newHabit.setAttribute('data-last-completed', habit.lastDate);
            }
            newHabit.innerHTML = `
                <span class="habit-name">${habit.name}</span>
                <span class="streak">üî• <span class="streak-count">${habit.count}</span> ng√†y</span>
                <button class="delete-btn">X√≥a</button>
            `;
            habitList.appendChild(newHabit);
        });
        updateProgress();
    }
}
document.getElementById('resetBtn').addEventListener('click', function() {
    if (confirm("Th·∫ßy c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô th√≥i quen v√† streak kh√¥ng? H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c!")) {
        localStorage.clear(); // X√≥a s·∫°ch b·ªô nh·ªõ
        habitList.innerHTML = ""; // X√≥a danh s√°ch tr√™n m√†n h√¨nh
        updateProgress(); // C·∫≠p nh·∫≠t l·∫°i thanh ti·∫øn tr√¨nh v·ªÅ 0%
    }
});

// G·ªçi h√†m l·∫•y d·ªØ li·ªáu ngay khi v·ª´a t·∫£i trang
loadData();
    </script>
</body>
</html>
