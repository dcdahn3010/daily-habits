<!DOCTYPE html>
<html>
<head>
    <title>Habit Tracker</title>

    <style>
        body {
    display: flex;
    flex-direction: column; /* X·∫øp c√°c th√†nh ph·∫ßn theo h√†ng d·ªçc */
    align-items: center;    /* CƒÉn gi·ªØa t·∫•t c·∫£ theo chi·ªÅu ngang */
    background-color: #f0f2f5;
    font-family: sans-serif;
    padding-top: 50px;
    }

    input, button {
    margin: 5px;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #ddd;
    }

    button {
    background-color: #1a73e8;
    color: white;
    cursor: pointer;
    }
      li {
       list-style: none; /* B·ªè d·∫•u ch·∫•m ƒë·∫ßu d√≤ng m·∫∑c ƒë·ªãnh */
       background: white;
       margin: 10px auto;
       padding: 15px;
       width: 300px;
       display: flex; /* Gi√∫p c√°c th√†nh ph·∫ßn n·∫±m tr√™n c√πng m·ªôt h√†ng */
       justify-content: space-between; /* ƒê·∫©y t√™n th√≥i quen v√† streak ra hai ƒë·∫ßu */
       border-radius: 8px;
       box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      }
      .streak {
        font-weight: bold;
        color: #ff5722; /* M√†u cam c·ªßa ng·ªçn l·ª≠a */
      }
      .delete-btn {
      background-color: #ffcdd2; /* M√†u ƒë·ªè nh·∫°t */
      color: #c62828;           /* Ch·ªØ ƒë·ªè ƒë·∫≠m */
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 12px;
      }

      .delete-btn:hover {
       background-color: #ef9a9a; /* ƒê·∫≠m h∆°n m·ªôt ch√∫t khi di chu·ªôt qua */
      }
      .progress-container {
    width: 100%;
    background-color: #e0e0e0;
    border-radius: 10px;
    margin: 20px 0 5px 0;
    height: 15px;
    overflow: hidden;
}

.progress-bar {
    height: 100%;
    width: 0%; /* B·∫Øt ƒë·∫ßu t·ª´ 0% */
    background: linear-gradient(90deg, #4caf50, #8bc34a);
    transition: width 0.5s ease; /* Hi·ªáu ·ª©ng ch·∫°y m∆∞·ª£t m√† */
}

#progressText {
    font-size: 14px;
    color: #666;
    margin-bottom: 20px;
}
.reset-btn {
    background-color: #ff5252;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 20px;
    font-size: 13px;
    opacity: 0.8;
}
.reset-btn:hover {
    opacity: 1;
    background-color: #d32f2f;
}
    </style>
</head>
<body>
    <h1>·ª®ng d·ª•ng theo d√µi th√≥i quen</h1>
    <div class="progress-container" style="width: 100%; background: #eee; border-radius: 10px; margin: 20px 0;">
    <div id="progressBar" style="width: 0%; height: 15px; background: linear-gradient(90deg, #4caf50, #8bc34a); transition: 0.5s; border-radius: 10px;"></div>
</div>
<p id="progressText" style="text-align: center; color: #666;">H√¥m nay b·∫°n ƒë√£ ho√†n th√†nh 0%</p>
    <input id="habitInput" type="text" placeholder="Nh·∫≠p th√≥i quen m·ªõi...">
    <button id="addBtn">Th√™m m·ªôt th√≥i quen</button>
    <button id="resetBtn" class="reset-btn">ƒê·∫∑t l·∫°i to√†n b·ªô</button>
       <ul id="habitList">
          <li>
    <span class="habit-name">ƒê·ªçc s√°ch 30 ph√∫t</span>

    <span class="streak">
        üî• <span class="streak-count">0</span> ng√†y
    </span>
    <button class="delete-btn">X√≥a</button>
          </li>
          <li>
    <span class="habit-name">H·ªçc b√†i 1 ti·∫øng</span>

    <span class="streak">
        üî• <span class="streak-count">0</span> ng√†y
    </span>
    <button class="delete-btn">X√≥a</button>
</li>
        </ul>
        <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <script >
       const habitInput = document.getElementById('habitInput');
const addBtn = document.getElementById('addBtn');
const habitList = document.getElementById('habitList'); // L·∫•y danh s√°ch

addBtn.addEventListener('click', function() {
    const text = habitInput.value;

    if (text !== "") { // Ch·ªâ th√™m n·∫øu √¥ nh·∫≠p kh√¥ng tr·ªëng
        // 1. T·∫°o m·ªôt th·∫ª li m·ªõi
        const newHabit = document.createElement('li');
        
        // 2. Thi·∫øt l·∫≠p n·ªôi dung cho th·∫ª li (gi·ªëng c·∫•u tr√∫c c√°c th·∫ª c≈©)
        newHabit.innerHTML = `
          <span class="habit-name">${text}</span>
          <span class="streak">üî• <span class="streak-count">0</span> ng√†y</span>
          <button class="delete-btn">X√≥a</button>
        `;

        // 3. G·∫Øn th·∫ª li n√†y v√†o danh s√°ch ul
        habitList.appendChild(newHabit);

        // 4. X√≥a ch·ªØ trong √¥ nh·∫≠p sau khi th√™m xong
        habitInput.value = "";
        saveData();
        updateProgress();
    }
});
  //  Trung t√¢m ƒëi·ªÅu khi·ªÉn: X√≥a, TƒÉng streak v√† L∆∞u d·ªØ li·ªáu
habitList.addEventListener('click', function(event) {
    //  X·ª¨ L√ù N√öT X√ìA
    if (event.target.classList.contains('delete-btn')) {
        const li = event.target.closest('li');
        li.remove(); 
        saveData(); 
        updateProgress();
        return; 
    }

    //  X·ª¨ L√ù TƒÇNG STREAK (Khi nh·∫•n v√†o th√≥i quen)
    const li = event.target.closest('li');
    if (li) {
        const today = new Date().toLocaleDateString();
        const lastDate = li.getAttribute('data-last-completed');

        //  Ki·ªÉm tra n·∫øu h√¥m nay ƒë√£ nh·∫•n r·ªìi
        if (lastDate === today) {
            alert("B·∫°n ƒë√£ ho√†n th√†nh th√≥i quen n√†y h√¥m nay r·ªìi! ‚ú®");
            return;
        }

        //  N·∫øu ch∆∞a nh·∫•n: TƒÉng con s·ªë streak
        const countSpan = li.querySelector('.streak-count');
        let currentCount = parseInt(countSpan.innerText);
        countSpan.innerText = currentCount + 1;

        //  Ghi ch√∫ l·∫°i ng√†y ho√†n th√†nh v√†o th·∫ª li
        li.setAttribute('data-last-completed', today);

        //  L∆∞u tr·∫°ng th√°i m·ªõi v√†o b·ªô nh·ªõ
        saveData();
        updateProgress();
    }
}); // K·∫øt th√∫c kh·ªëi ƒëi·ªÅu khi·ªÉn danh s√°ch
     
// --- ƒê·ªäNH NGHƒ®A H√ÄM  ---

function saveData() {
    const habits = [];
    const liItems = document.querySelectorAll('#habitList li');
    liItems.forEach(li => {
        habits.push({
            name: li.querySelector('.habit-name').innerText,
            count: li.querySelector('.streak-count').innerText,
            lastDate: li.getAttribute('data-last-completed')
        });
    });
    localStorage.setItem('habits', JSON.stringify(habits));
}

function updateProgress() {
    const liItems = document.querySelectorAll('#habitList li');
    const total = liItems.length;
    
    if (total === 0) {
        document.getElementById('progressBar').style.width = "0%";
        document.getElementById('progressText').innerText = "H√£y th√™m th√≥i quen ƒë·ªÉ b·∫Øt ƒë·∫ßu!";
        return;
    }

    const today = new Date().toLocaleDateString();
    let completedToday = 0;

    liItems.forEach(li => {
        if (li.getAttribute('data-last-completed') === today) {
            completedToday++;
        }
    });

    const percent = Math.round((completedToday / total) * 100);
    
    // C·∫≠p nh·∫≠t giao di·ªán
    document.getElementById('progressBar').style.width = percent + "%";
    document.getElementById('progressText').innerText = `H√¥m nay b·∫°n ƒë√£ ho√†n th√†nh ${percent}%`;
    // N·∫øu ƒë·∫°t 100% v√† c√≥ √≠t nh·∫•t m·ªôt th√≥i quen, th√¨ b·∫Øn ph√°o hoa!
    if (percent === 100 && total > 0) {
    confetti({
        particleCount: 150,
        spread: 70,
        origin: { y: 0.6 },
        colors: ['#4caf50', '#8bc34a', '#ffffff'] // M√†u xanh l√° h·ª£p v·ªõi ·ª©ng d·ª•ng
    });
}
    
}

// L·ªánh k√≠ch ho·∫°t n·∫°p d·ªØ li·ªáu khi v·ª´a m·ªü trang
loadData();
function loadData() {
    const savedHabits = localStorage.getItem('habits');
    if (savedHabits) {
        const habits = JSON.parse(savedHabits);
        
        //  X√≥a s·∫°ch danh s√°ch c≈© tr√™n m√†n h√¨nh tr∆∞·ªõc khi n·∫°p l·∫°i
        habitList.innerHTML = ""; 

        habits.forEach(habit => {
            const newHabit = document.createElement('li');
            if (habit.lastDate) {
                newHabit.setAttribute('data-last-completed', habit.lastDate);
            }
            newHabit.innerHTML = `
                <span class="habit-name">${habit.name}</span>
                <span class="streak">üî• <span class="streak-count">${habit.count}</span> ng√†y</span>
                <button class="delete-btn">X√≥a</button>
            `;
            habitList.appendChild(newHabit);
        });
        updateProgress();
    }
}
document.getElementById('resetBtn').addEventListener('click', function() {
    if (confirm("Th·∫ßy c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô th√≥i quen v√† streak kh√¥ng? H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c!")) {
        localStorage.clear(); // X√≥a s·∫°ch b·ªô nh·ªõ
        habitList.innerHTML = ""; // X√≥a danh s√°ch tr√™n m√†n h√¨nh
        updateProgress(); // C·∫≠p nh·∫≠t l·∫°i thanh ti·∫øn tr√¨nh v·ªÅ 0%
    }
});

// G·ªçi h√†m l·∫•y d·ªØ li·ªáu ngay khi v·ª´a t·∫£i trang
loadData();
    </script>
</body>
</html>
